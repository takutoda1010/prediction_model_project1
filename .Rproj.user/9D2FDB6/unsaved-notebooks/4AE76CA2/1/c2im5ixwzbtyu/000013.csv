"0",""
"0","# ç·šå½¢ãƒˆãƒ¬ãƒ³ãƒ‰ã®æ¤œå®š"
"0","if (nrow(yearly_trends) > 0) {"
"0","  trend_test <- cor.test(yearly_trends$op_year, "
"0","                         yearly_trends$recur_2y_calc[, ""Rate""], "
"0","                         method = ""spearman"")"
"0","  message(sprintf(""\nTemporal trend correlation: rho = %.3f, p = %.4f"", "
"0","                 trend_test$estimate, trend_test$p.value))"
"0","}"
"2","Warning: Cannot compute exact p-value with ties"
"2","
Temporal trend correlation: rho = -0.544, p = 0.0088
"
"0","# 4. Train vs TestæœŸé–“ã®ãƒ¢ãƒ‡ãƒ«ä¿‚æ•°æ¯”è¼ƒ"
"0","message(""\nðŸ“Š 4. Model Coefficient Stability"")"
"2","
ðŸ“Š 4. Model Coefficient Stability
"
"0","message(paste(rep(""-"", 50), collapse = """"))"
"2","--------------------------------------------------
"
"0","# ç°¡æ˜“æ¯”è¼ƒã®ãŸã‚ã€ä¸»è¦å¤‰æ•°ã®ã¿"
"0","if (exists(""best_model"")) {"
"0","  # ä¿‚æ•°ã®å–å¾—"
"0","  coef_names <- names(coef(best_model))"
"0","  message(sprintf(""Model has %d coefficients"", length(coef_names)))"
"0","  "
"0","  # ä¸Šä½5å¤‰æ•°ã‚’è¡¨ç¤º"
"0","  coef_vals <- abs(coef(best_model))"
"0","  top_vars <- names(sort(coef_vals, decreasing = TRUE)[1:min(5, length(coef_vals))])"
"0","  "
"0","  message(""\nTop 5 predictive variables:"")"
"0","  for (v in top_vars) {"
"0","    message(sprintf(""  %s: Î² = %.3f"", v, coef(best_model)[v]))"
"0","  }"
"0","}"
"2","Model has 18 coefficients
"
"2","
Top 5 predictive variables:
"
"2","  m: Î² = -0.884
"
"2","  child_pughB: Î² = -0.815
"
"2","  macroVITRUE: Î² = 0.668
"
"2","  ALBIscore: Î² = 0.515
"
"2","  stage_diagBR2: Î² = 0.514
"
"0","# 5. ç—‡ä¾‹ã®è¤‡é›‘ã•ã®æ¯”è¼ƒ"
"0","message(""\nðŸ“Š 5. Case Complexity Analysis"")"
"2","
ðŸ“Š 5. Case Complexity Analysis
"
"0","message(paste(rep(""-"", 50), collapse = """"))"
"2","--------------------------------------------------
"
"0","for (set_name in c(""train"", ""val"", ""test"")) {"
"0","  data <- split_data_fixed[[set_name]]"
"0","  "
"0","  # è¤‡é›‘ã•ã‚¹ã‚³ã‚¢ã®è¨ˆç®—"
"0","  complexity <- rep(0, nrow(data))"
"0","  "
"0","  # å„è¦å› ã‚’ãƒã‚§ãƒƒã‚¯"
"0","  if (""stage_diag"" %in% names(data)) {"
"0","    complexity <- complexity + (data$stage_diag != ""R"")"
"0","  }"
"0","  if (""count"" %in% names(data)) {"
"0","    complexity <- complexity + (data$count > 1)"
"0","  }"
"0","  if (""max_diam_cm"" %in% names(data)) {"
"0","    complexity <- complexity + (data$max_diam_cm > 5)"
"0","  }"
"0","  if (""child_pugh"" %in% names(data)) {"
"0","    complexity <- complexity + (data$child_pugh != ""A"")"
"0","  }"
"0","  if (all(c(""microVI"", ""macroVI"") %in% names(data))) {"
"0","    complexity <- complexity + (data$microVI | data$macroVI)"
"0","  }"
"0","  "
"0","  message(sprintf(""\n%s Set Complexity:"", set_name))"
"0","  message(sprintf(""  Mean complexity score: %.2f"", mean(complexity, na.rm = TRUE)))"
"0","  message(sprintf(""  High complexity (â‰¥3): %.1f%%"", "
"0","                 mean(complexity >= 3, na.rm = TRUE) * 100))"
"0","}"
"2","Warning: â€˜|â€™ not meaningful for factors"
"2","
train Set Complexity:
"
"2","  Mean complexity score: NaN
"
"2","  High complexity (â‰¥3): NaN%
"
"2","Warning: â€˜|â€™ not meaningful for factors"
"2","
val Set Complexity:
"
"2","  Mean complexity score: NaN
"
"2","  High complexity (â‰¥3): NaN%
"
"2","Warning: â€˜|â€™ not meaningful for factors"
"2","
test Set Complexity:
"
"2","  Mean complexity score: NaN
"
"2","  High complexity (â‰¥3): NaN%
"
"0","message(""\n"", paste(rep(""="", 60), collapse = """"))"
"2","
============================================================
"
"0","message(""INVESTIGATION COMPLETE"")"
"2","INVESTIGATION COMPLETE
"
"0","message(paste(rep(""="", 60), collapse = """"))"
"2","============================================================
"
