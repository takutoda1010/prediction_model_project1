"0","## ==== CAL-SLOPE-M7-2: Cox recalibration (slope only) ========================"
"0","# Cox: Surv(time, event) ~ beta * LP   （切片はCoxでは定義されない）"
"0","fit_slope <- survival::coxph(Surv(time2y, event2y) ~ LP, data = d_cal, ties = ""efron"")"
"0",""
"0","b  <- as.numeric(coef(fit_slope)[""LP""])"
"0","se <- sqrt(vcov(fit_slope)[""LP"",""LP""])"
"0","ci <- b + c(-1, 1) * 1.96 * se"
"0",""
"0","cat(sprintf(""[M7][Calibration slope] beta = %.3f (SE = %.3f), 95%% CI [%.3f, %.3f]\n"","
"0","            b, se, ci[1], ci[2]))"
"1","[M7][Calibration slope] beta = 0.956 (SE = 0.159), 95% CI [0.645, 1.267]
"
"0","# ちょい解釈メッセージ"
"0","msg <- if (is.na(b)) {"
"0","  ""Slope is NA (check LP/outcome)."""
"0","} else if (b < 1) {"
"0","  ""Predictions are too extreme (over/under swings too large)."""
"0","} else if (b > 1) {"
"0","  ""Predictions are too weak/flat (under-dispersed)."""
"0","} else ""Perfect slope."""
"0","cat(sprintf(""[M7][Calibration slope] %s\n"", msg))"
"1","[M7][Calibration slope] Predictions are too extreme (over/under swings too large).
"
