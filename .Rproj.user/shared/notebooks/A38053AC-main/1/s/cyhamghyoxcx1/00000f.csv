"0","# ========================================================================"
"0","# 8. çµæœã‚µãƒãƒªãƒ¼ï¼ˆè¿½åŠ åˆ†æã‚’å«ã‚€æ›´æ–°ç‰ˆï¼‰"
"0","# ========================================================================"
"0",""
"0","message(""\n"")"
"2","

"
"0","message(""================================================================================"")"
"2","================================================================================
"
"0","message(""                              Pipeline Completed                                "")"
"2","                              Pipeline Completed                                
"
"0","message(""================================================================================"")"
"2","================================================================================
"
"0","# å®Ÿè¡Œæ™‚é–“"
"0","end_time <- Sys.time()"
"0","elapsed_time <- difftime(end_time, start_time, units = ""mins"")"
"0",""
"0","message(sprintf(""\nExecution Summary:""))"
"2","
Execution Summary:
"
"0","message(sprintf(""  Total time: %.1f minutes"", as.numeric(elapsed_time)))"
"2","  Total time: 16.9 minutes
"
"0","message(sprintf(""  Data: %d samples (%d train, %d val, %d test)"","
"0","               nrow(final_data),"
"0","               nrow(split_data$train),"
"0","               nrow(split_data$val),"
"0","               nrow(split_data$test)))"
"2","  Data: 990 samples (567 train, 189 val, 189 test)
"
"0","message(sprintf(""  Models built: %d"", n_successful))"
"2","  Models built: 9
"
"0","message(sprintf(""  Output directory: %s"", paths$output))"
"2","  Output directory: /Users/yoshidatakuto/Dropbox/Hokkaido University/å¤§å­¦é™¢åŒ»å­¦é™¢/Borderline HCC/Prediction model_Project1/03_Output
"
"0","# ãƒ™ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«ã®è©³ç´°è¡¨ç¤ºï¼ˆæ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ãã®ã¾ã¾ï¼‰"
"0","if (exists(""evaluation_results"") && !is.null(evaluation_results$summary)) {"
"0","  best_idx <- which.max(evaluation_results$summary$c_index_test)"
"0","  if (length(best_idx) > 0) {"
"0","    best <- evaluation_results$summary[best_idx, ]"
"0","    message(sprintf(""\nğŸ† BEST MODEL: %s"", best$model))"
"0","    message(sprintf(""  C-index (Train/Val/Test): %.3f / %.3f / %.3f"","
"0","                   best$c_index_train, best$c_index_val, best$c_index_test))"
"0","    "
"0","    # TNMã¨ã®æ¯”è¼ƒï¼ˆè¿½åŠ ï¼‰"
"0","    if (exists(""additional_results"") && !is.null(additional_results$tnm_comparison)) {"
"0","      message(sprintf(""  TNM C-index: %.3f"", additional_results$tnm_comparison))"
"0","      message(sprintf(""  Improvement over TNM: +%.3f"", "
"0","                     best$c_index_test - additional_results$tnm_comparison))"
"0","    }"
"0","    "
"0","    # ãƒ™ã‚¹ãƒˆãƒ¢ãƒ‡ãƒ«ã®å¤‰æ•°ã‚’è¡¨ç¤º"
"0","    best_model <- models[[best$model]]"
"0","    if (!is.null(best_model)) {"
"0","      if (inherits(best_model, ""coxph"")) {"
"0","        vars <- names(coef(best_model))"
"0","      } else if (inherits(best_model, ""list"") && ""selected_vars"" %in% names(best_model)) {"
"0","        vars <- best_model$selected_vars"
"0","      } else {"
"0","        vars <- NULL"
"0","      }"
"0","      "
"0","      if (!is.null(vars)) {"
"0","        message(sprintf(""  Variables (%d): %s"", "
"0","                       length(vars),"
"0","                       paste(vars, collapse = "", "")))"
"0","      }"
"0","    }"
"0","  }"
"0","}"
"2","
ğŸ† BEST MODEL: m1_stepaic_forward
"
"2","  C-index (Train/Val/Test): 0.716 / 0.691 / 0.776
"
"2","  TNM C-index: 0.723
"
"2","  Improvement over TNM: +0.053
"
"2","  Variables (18): t, ALBIscore, afp_l3_log1p, sm1, fc_inf1, alt_log1p, liver_damageB, liver_damageC, macroVITRUE, m, stage_diagBR1, stage_diagBR2, child_pughB, child_pughC, plt_log1p, fibrosis_score, icg_r15_log1p, microVITRUE
"
"0","# å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ï¼ˆè¿½åŠ åˆ†æã‚’å«ã‚€æ›´æ–°ç‰ˆï¼‰"
"0","message(""\nGenerated Files:"")"
"2","
Generated Files:
"
"0","output_files <- list("
"0","  ""ğŸ“Š Data"" = file.path(paths$output, ""processed_data.rds""),"
"0","  ""ğŸ”€ Split"" = file.path(paths$output_models, ""data_split.rds""),"
"0","  ""ğŸ¤– Models"" = file.path(paths$output_models, ""all_models.rds""),"
"0","  ""ğŸ“ˆ Evaluation"" = file.path(paths$output_models, ""evaluation_results.rds""),"
"0","  ""ğŸ”¬ Additional Analysis"" = file.path(paths$output_models, ""additional_analysis_results.rds""),"
"0","  ""ğŸ“‹ Summary Table"" = file.path(paths$output_tables, ""model_performance.csv""),"
"0","  ""ğŸ“‰ ROC Curves"" = file.path(paths$output_figures, ""roc_curves_all_models.pdf""),"
"0","  ""ğŸ“Š DCA"" = file.path(paths$output_figures, ""dca_comparison.pdf""),"
"0","  ""ğŸ¯ Calibration"" = file.path(paths$output_figures, ""calibration_plot.pdf""),"
"0","  ""ğŸ¨ Combined Plot"" = file.path(paths$output_figures, ""combined_evaluation.pdf"")"
"0",")"
"0",""
"0","for (name in names(output_files)) {"
"0","  if (file.exists(output_files[[name]]) || dir.exists(output_files[[name]])) {"
"0","    message(sprintf(""  %s: %s"", name, basename(output_files[[name]])))"
"0","  }"
"0","}"
"2","  ğŸ“Š Data: processed_data.rds
"
"2","  ğŸ”€ Split: data_split.rds
"
"2","  ğŸ¤– Models: all_models.rds
"
"2","  ğŸ”¬ Additional Analysis: additional_analysis_results.rds
"
"2","  ğŸ“‰ ROC Curves: roc_curves_all_models.pdf
"
"2","  ğŸ“Š DCA: dca_comparison.pdf
"
"2","  ğŸ¯ Calibration: calibration_plot.pdf
"
"2","  ğŸ¨ Combined Plot: combined_evaluation.pdf
"
"0","message(""\nâœ… All tasks completed successfully!"")"
"2","
âœ… All tasks completed successfully!
"
"0","message(sprintf(""\nğŸ‰ Results are available in: %s"", paths$output))"
"2","
ğŸ‰ Results are available in: /Users/yoshidatakuto/Dropbox/Hokkaido University/å¤§å­¦é™¢åŒ»å­¦é™¢/Borderline HCC/Prediction model_Project1/03_Output
"
"0","message(""\nNext steps:"")"
"2","
Next steps:
"
"0","message(""  1. Review model performance in: 03_Output/tables/model_performance.csv"")"
"2","  1. Review model performance in: 03_Output/tables/model_performance.csv
"
"0","message(""  2. Check ROC curves in: 03_Output/figures/roc_curves_all_models.pdf"")"
"2","  2. Check ROC curves in: 03_Output/figures/roc_curves_all_models.pdf
"
"0","message(""  3. Check DCA in: 03_Output/figures/dca_comparison.pdf"")"
"2","  3. Check DCA in: 03_Output/figures/dca_comparison.pdf
"
"0","message(""  4. Check calibration in: 03_Output/figures/calibration_plot.pdf"")"
"2","  4. Check calibration in: 03_Output/figures/calibration_plot.pdf
"
"0","message(""  5. Load best model with: readRDS('03_Output/models/all_models.rds')"")"
"2","  5. Load best model with: readRDS('03_Output/models/all_models.rds')
"
"0","message(""\n================================================================================\n"")"
"2","
================================================================================

"
