"0","# ② 歪み対処：right→log1p(非負) or asinh(負値含む)／left→反転log1p（max - x）"
"0","# （元変数は残し、新しい列を追加）※ rfs_months / os_months は常に除外"
"0","apply_transforms <- function(df, skew_info){"
"0","  exclude_vars <- c(""rfs_months"",""os_months"")"
"0","  stopifnot(all(c(""var"",""dir"") %in% names(skew_info)))"
"0","  si <- skew_info[!(skew_info$var %in% exclude_vars), , drop = FALSE]"
"0",""
"0","  for (i in seq_len(nrow(si))) {"
"0","    v   <- si$var[i]"
"0","    dir <- si$dir[i]"
"0","    if (!v %in% names(df) || !is.numeric(df[[v]])) next"
"0",""
"0","    x <- df[[v]]"
"0",""
"0","    if (identical(dir, ""right"")) {"
"0","      xmin <- suppressWarnings(min(x, na.rm = TRUE))"
"0","      if (is.finite(xmin) && xmin >= 0) {"
"0","        df[[paste0(v, ""_log1p"")]] <- log1p(x)"
"0","      } else {"
"0","        df[[paste0(v, ""_asinh"")]]  <- asinh(x)"
"0","      }"
"0","    } else if (identical(dir, ""left"")) {"
"0","      xmax <- suppressWarnings(max(x, na.rm = TRUE))"
"0","      if (is.finite(xmax)) {"
"0","        df[[paste0(v, ""_reflog1p"")]] <- log1p(pmax(xmax - x, 0))"
"0","      }"
"0","    }"
"0","  }"
"0","  df"
"0","}"
"0",""
"0","ds07 <- apply_transforms(ds07, skew_tbl)"
"0",""
"0","# 追加された列を確認（末尾10列を表示）"
"0","tail(names(ds07), 10)"
"1"," [1]"
"1"," ""ast_log1p""          "
"1"," ""cea_log1p""          "
"1"," ""tum_count_pre_log1p"""
"1"," ""alt_log1p""          "
"1","
"
"1"," [5]"
"1"," ""specimen_wt_log1p""  "
"1"," ""icg_r15_log1p""      "
"1"," ""max_diam_cm_log1p""  "
"1"," ""afp_l3_log1p""       "
"1","
"
"1"," [9]"
"1"," ""tum_diam_pre_log1p"" "
"1"," ""plt_log1p""          "
"1","
"
