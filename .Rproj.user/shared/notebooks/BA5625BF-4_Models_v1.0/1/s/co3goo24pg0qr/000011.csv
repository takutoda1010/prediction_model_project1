"0","## ==== CHUNK: Drop unused + drop originals of transformed vars (exclude rfs/os) ===="
"0","suppressPackageStartupMessages({ library(dplyr) })"
"0",""
"0","# ① 明示ドロップ（そのまま）"
"0","vars_to_drop <- c("
"0","  ""group_rb"",""tum_diam_pre"",""tum_count_pre"",""vp_pre"",""vv_pre"","
"0","  ""op_dx_txt"",""op_proc_txt"",""op_proc_cat"",""pringle"",""thoraco_lap"","
"0","  ""rehepatectomy"",""grade_txt"""
"0",")"
"0",""
"0","# ② 変換済み列の「元」変数はドロップするが、下記は除外"
"0","exclude_vars <- c(""rfs_months"",""os_months"")"
"0",""
"0","tf_cols      <- names(ds07)[grepl(""(_log1p|_asinh|_reflog1p)$"", names(ds07))]"
"0","orig_from_tf <- setdiff(unique(sub(""(_log1p|_asinh|_reflog1p)$"", """", tf_cols)), exclude_vars)"
"0",""
"0","present_drop <- intersect(vars_to_drop, names(ds07))           # ①"
"0","orig_to_drop <- intersect(orig_from_tf, names(ds07))           # ②（除外考慮後）"
"0",""
"0","to_drop <- unique(c(present_drop, orig_to_drop))"
"0",""
"0","ds08 <- ds07 %>% select(-any_of(to_drop))"
"0",""
"0","# 確認（任意）"
"0","message(sprintf(""Dropped %d columns: %s"","
"0","                length(to_drop), paste(to_drop, collapse = "", "")))"
"2","Dropped 26 columns: group_rb, tum_diam_pre, tum_count_pre, vp_pre, vv_pre, op_dx_txt, op_proc_txt, op_proc_cat, pringle, thoraco_lap, rehepatectomy, grade_txt, lhl15, afp, bleed_ml, tbil, ca19_9, pivka2, ast, cea, alt, specimen_wt, icg_r15, max_diam_cm, afp_l3, plt
"
