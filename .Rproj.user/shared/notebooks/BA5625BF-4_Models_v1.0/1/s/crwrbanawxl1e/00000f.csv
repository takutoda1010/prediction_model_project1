"0","## ==== CHUNK: define candidate sets (var_all, var_pre) on ds08 ===="
"0","stopifnot(exists(""ds08""))"
"0",""
"0","# ① 術後データも含めた候補（多重共線性のため vp_pre 等は入れない前提）"
"0","var_all_candidates <- c("
"0","  ""stage_diag"",""age"",""sex"",""hbv"",""hcv"",""alb"",""che"",""pt_inr"",""hh15"","
"0","  ""liver_damage"",""child_pugh"",""op_time_min"",""curability"",""growth_type"","
"0","  ""fc"",""fc_inf"",""sf"",""im"",""sm"",""t"",""n"",""m"",""fibrosis_score"",""grading_score"","
"0","  ""microVI"",""macroVI"",""ALBIscore"",""BMI"",""lhl15_log1p"",""afp_log1p"","
"0","  ""bleed_ml_log1p"",""tbil_log1p"",""ca19_9_log1p"",""pivka2_log1p"",""ast_log1p"","
"0","  ""cea_log1p"",""tum_count_pre_log1p"",""alt_log1p"",""specimen_wt_log1p"","
"0","  ""icg_r15_log1p"",""max_diam_cm_log1p"",""afp_l3_log1p"",""tum_diam_pre_log1p"","
"0","  ""plt_log1p"""
"0",")"
"0",""
"0","# ② 術前のみの候補"
"0","var_pre_candidates <- c("
"0","  ""stage_surg"",""n_pre"",""m_pre"",""age"",""sex"",""hbv"",""hcv"",""alb"",""che"",""pt_inr"","
"0","  ""hh15"",""liver_damage"",""child_pugh"",""ALBIscore"",""BMI"",""lhl15_log1p"","
"0","  ""afp_log1p"",""tbil_log1p"",""ca19_9_log1p"",""pivka2_log1p"",""ast_log1p"","
"0","  ""cea_log1p"",""tum_count_pre_log1p"",""alt_log1p"",""icg_r15_log1p"","
"0","  ""max_diam_cm_log1p"",""afp_l3_log1p"",""tum_diam_pre_log1p"",""plt_log1p"""
"0",")"
"0",""
"0","# 実在列だけを残し（順序は指定順のまま）、欠損は警告表示"
"0","present <- names(ds08)"
"0",""
"0","var_all <- var_all_candidates[var_all_candidates %in% present]"
"0","var_pre <- var_pre_candidates[var_pre_candidates %in% present]"
"0",""
"0","missing_all <- setdiff(var_all_candidates, present)"
"0","missing_pre <- setdiff(var_pre_candidates, present)"
"0",""
"0","message(sprintf(""var_all: %d vars"", length(var_all)))"
"2","var_all: 43 vars
"
"0","if (length(missing_all)) message(""Missing in ds08 (var_all): "", paste(missing_all, collapse="", ""))"
"2","Missing in ds08 (var_all): curability
"
"0","message(sprintf(""var_pre: %d vars"", length(var_pre)))"
"2","var_pre: 29 vars
"
"0","if (length(missing_pre)) message(""Missing in ds08 (var_pre): "", paste(missing_pre, collapse="", ""))"
"0",""
