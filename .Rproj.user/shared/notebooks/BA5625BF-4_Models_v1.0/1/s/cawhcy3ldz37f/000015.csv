"0",""
"0","# 24か月AUCの件数チェック（参考）"
"0","T_used <- if (""rfs_months"" %in% names(tst)) tst$rfs_months else tst$time2y"
"0","Delta  <- if (""rfs_event"" %in% names(tst)) as.integer(tst$rfs_event==1) else tst$event2y"
"0","cases_24    <- sum(T_used <= 24 & Delta == 1, na.rm = TRUE)"
"0","controls_24 <- sum(T_used >  24,               na.rm = TRUE)"
"0","cens_0_24   <- sum(T_used <= 24 & Delta == 0,  na.rm = TRUE)"
"0","cat(sprintf(""For AUC@24: cases=%d, controls=%d, censored_before=%d\n"","
"0","            cases_24, controls_24, cens_0_24))"
"1","For AUC@24: cases=63, controls=60, censored_before=73
"
"0","# ---- 3) model_results に保存 -------------------------------------------------"
"0","if (!exists(""model_results"")) model_results <- list()"
"0","model_results[[model_name_m1]] <- list("
"0","  model_name     = model_name_m1,"
"0","  fit            = fit_step,"
"0","  selected_terms = selected_terms_m1,"
"0","  c_index        = c_index,"
"0","  c_se           = c_se,"
"0","  c_ci           = c_ci,"
"0","  auc_df         = auc_df"
"0",")"
"0",""
