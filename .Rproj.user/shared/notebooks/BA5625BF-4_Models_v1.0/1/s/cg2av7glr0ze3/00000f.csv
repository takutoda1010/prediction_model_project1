"0","## ==== CHUNK1: make Surv-ready data from ds09 (use existing time2y & recur_2y) ===="
"0","prep_surv <- function(df){"
"0","  df %>%"
"0","    mutate("
"0","      time2y  = as.numeric(time2y),"
"0","      event2y = as.integer(recur_2y == TRUE)   # 再発=1, それ以外=0"
"0","    ) %>%"
"0","    filter(is.finite(time2y), time2y > 0, !is.na(event2y))"
"0","}"
"0",""
"0","trv <- bind_rows(prep_surv(ds09_train), prep_surv(ds09_val))  # 学習: Train+Val"
"0","tst <- prep_surv(ds09_test)                                   # 評価: Test"
