"0","## ==== CHUNK M7K-0: 前提チェック & 下準備（glmnet, データ分割） ================"
"0","suppressPackageStartupMessages({ if (!""glmnet"" %in% .packages()) library(glmnet) })"
"0",""
"0","stopifnot(exists(""ds09_train""), exists(""ds09_val""), exists(""ds09_test""), exists(""preds""))"
"0","if (!exists(""prep_surv"")) stop(""prep_surv() が見つかりません。前チャンクを実行してください。"")"
"0","if (!exists(""eval_model"")) stop(""eval_model() が見つかりません。前チャンクを実行してください。"")"
"0",""
"0","# Train/Val/Test のSurv-ready版（既に trv/tst があれば再作成しません）"
"0","if (!exists(""trn"")) trn <- prep_surv(ds09_train)"
"0","if (!exists(""val"")) val <- prep_surv(ds09_val)"
"0","if (!exists(""tst"")) tst <- prep_surv(ds09_test)"
"0","if (!exists(""trv"")) trv <- dplyr::bind_rows(trn, val)"
"0",""
"0","# 目標の“親変数”個数レンジ（因子は1親としてカウント）"
"0","k_target <- c(4L, 6L)"
"0","set.seed(20251102)"
"0",""
