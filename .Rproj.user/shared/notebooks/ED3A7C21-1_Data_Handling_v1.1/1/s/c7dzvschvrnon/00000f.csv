"0","# ========================================================================"
"0","# 8. データ品質チェック関数"
"0","# ========================================================================"
"0",""
"0","#' データ品質のサマリーレポート作成"
"0","#' @param data チェック対象のデータフレーム"
"0","print_data_summary <- function(data) {"
"0","  cat(""\n==== データサマリー ====\n"")"
"0","  cat(sprintf(""行数: %d\n"", nrow(data)))"
"0","  cat(sprintf(""列数: %d\n"", ncol(data)))"
"0","  "
"0","  # 欠損値の概要"
"0","  missing_summary <- data |>"
"0","    summarise(across(everything(), ~sum(is.na(.x)))) |>"
"0","    tidyr::pivot_longer(everything(), names_to = ""variable"", values_to = ""n_missing"") |>"
"0","    filter(n_missing > 0) |>"
"0","    arrange(desc(n_missing))"
"0","  "
"0","  if (nrow(missing_summary) > 0) {"
"0","    cat(""\n欠損値の多い変数 (上位10):\n"")"
"0","    print(head(missing_summary, 10))"
"0","  }"
"0","  "
"0","  # 主要変数の分布"
"0","  cat(""\n主要アウトカムの分布:\n"")"
"0","  if (""vital_status"" %in% names(data)) {"
"0","    print(table(data$vital_status, useNA = ""ifany""))"
"0","  }"
"0","  if (""recur_tf"" %in% names(data)) {"
"0","    cat(""\n再発:\n"")"
"0","    print(table(data$recur_tf, useNA = ""ifany""))"
"0","  }"
"0","  if (""group_rb"" %in% names(data)) {"
"0","    cat(""\n群分け:\n"")"
"0","    print(table(data$group_rb, useNA = ""ifany""))"
"0","  }"
"0","}"
