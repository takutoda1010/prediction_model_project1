"0","## ==== PATCH for CHUNK C (Bootstrap CI) ===="
"0","set.seed(123)"
"0","B <- 1000"
"0","n <- nrow(test_common)"
"0",""
"0","boot_c <- function(lp){"
"0","  out <- numeric(B)"
"0","  for(b in 1:B){"
"0","    idx <- sample.int(n, n, replace = TRUE)"
"0","    out[b] <- c_index(y_time[idx], y_event[idx], lp[idx])"
"0","  }"
"0","  out <- out[is.finite(out)]               # たまに NA になるブートサンプルを除外"
"0","  qs <- quantile(out, c(0.025, 0.975), na.rm = TRUE)  # ← 名前付きベクトル"
"0","  c(mean = mean(out, na.rm = TRUE),"
"0","    lo   = unname(qs[1]),                  # ← 名前を外す"
"0","    hi   = unname(qs[2]))"
"0","}"
"0",""
"0","ci_pre   <- boot_c(lp_pre)"
"0","ci_post  <- boot_c(lp_post)"
"0","ci_tnm   <- boot_c(lp_tnm)"
"0","ci_lasso <- boot_c(lp_lasso)"
"0",""
"0","tibble::tibble("
"0","  model  = c(""ERASL_pre"",""ERASL_post"",""TNM"",""LASSO""),"
"0","  c_mean = c(ci_pre[""mean""], ci_post[""mean""], ci_tnm[""mean""], ci_lasso[""mean""]),"
"0","  c_lo   = c(ci_pre[""lo""],   ci_post[""lo""],   ci_tnm[""lo""],   ci_lasso[""lo""]),"
"0","  c_hi   = c(ci_pre[""hi""],   ci_post[""hi""],   ci_lasso[""hi""], ci_lasso[""hi""]),  # ← ここタイプミス注意"
"0","  over_0_5 = c(ci_pre[""lo""],ci_post[""lo""],ci_tnm[""lo""],ci_lasso[""lo""]) > 0.5"
"0",")"
