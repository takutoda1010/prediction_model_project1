"0","# ========================================================================"
"0","# 4. プロジェクトパス設定"
"0","# ========================================================================"
"0",""
"0","#' プロジェクトのパス構造を設定"
"0","#' @param base_dir ベースディレクトリ（NULL時は設定ファイルから）"
"0","#' @return パスのリスト"
"0","setup_project_paths <- function(base_dir = NULL) {"
"0","  "
"0","  # 設定ファイルの読み込み試行"
"0","  config_file <- here::here(""config"", ""settings.yaml"")"
"0","  "
"0","  if (is.null(base_dir) && file.exists(config_file)) {"
"0","    config <- yaml::read_yaml(config_file)"
"0","    base_dir <- config$paths$base_dir"
"0","  }"
"0","  "
"0","  # ベースディレクトリの決定"
"0","  if (is.null(base_dir)) {"
"0","    base_dir <- here::here()  # プロジェクトルート"
"0","  }"
"0","  "
"0","  # パス構造の定義"
"0","  paths <- list("
"0","    base = base_dir,"
"0","    data = file.path(base_dir, ""01_Data""),"
"0","    document = file.path(base_dir, ""02_Document""),"
"0","    output = file.path(base_dir, ""03_Output""),"
"0","    script = file.path(base_dir, ""04_Script""),"
"0","    reference = file.path(base_dir, ""05_Reference""),"
"0","    config = file.path(base_dir, ""04_Script"", ""config""),"
"0","    R = file.path(base_dir, ""04_Script"", ""R""),"
"0","    "
"0","    # 出力用サブディレクトリ"
"0","    output_tables = file.path(base_dir, ""03_Output"", ""tables""),"
"0","    output_figures = file.path(base_dir, ""03_Output"", ""figures""),"
"0","    output_models = file.path(base_dir, ""03_Output"", ""models""),"
"0","    output_reports = file.path(base_dir, ""03_Output"", ""reports"")"
"0","  )"
"0","  "
"0","  # 出力ディレクトリの作成（存在しなければ）"
"0","  output_dirs <- grep(""^output"", names(paths), value = TRUE)"
"0","  for (dir_name in output_dirs) {"
"0","    dir_path <- paths[[dir_name]]"
"0","    if (!dir.exists(dir_path)) {"
"0","      dir.create(dir_path, recursive = TRUE, showWarnings = FALSE)"
"0","      message(sprintf(""Created directory: %s"", dir_path))"
"0","    }"
"0","  }"
"0","  "
"0","  return(paths)"
"0","}"
