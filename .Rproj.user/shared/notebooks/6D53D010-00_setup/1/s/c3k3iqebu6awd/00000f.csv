"0","# ========================================================================"
"0","# 5. ログ設定"
"0","# ========================================================================"
"0",""
"0","#' ログシステムの初期化"
"0","#' @param log_file ログファイルのパス"
"0","#' @param log_level ログレベル（DEBUG, INFO, WARN, ERROR）"
"0","setup_logging <- function(log_file = NULL, log_level = ""INFO"") {"
"0","  "
"0","  if (!""logger"" %in% .packages()) {"
"0","    message(""Logger package not available. Skipping logging setup."")"
"0","    return(invisible(NULL))"
"0","  }"
"0","  "
"0","  # ログファイルパスの設定"
"0","  if (is.null(log_file)) {"
"0","    paths <- setup_project_paths()"
"0","    log_dir <- file.path(paths$output, ""logs"")"
"0","    if (!dir.exists(log_dir)) {"
"0","      dir.create(log_dir, recursive = TRUE, showWarnings = FALSE)"
"0","    }"
"0","    "
"0","    # 日付付きログファイル名"
"0","    log_file <- file.path("
"0","      log_dir, "
"0","      sprintf(""hcc_analysis_%s.log"", format(Sys.Date(), ""%Y%m%d""))"
"0","    )"
"0","  }"
"0","  "
"0","  # ログレベルの設定"
"0","  log_levels <- c(DEBUG = 10, INFO = 20, WARN = 30, ERROR = 40)"
"0","  if (!log_level %in% names(log_levels)) {"
"0","    log_level <- ""INFO"""
"0","  }"
"0","  "
"0","  # loggerの設定"
"0","  logger::log_threshold(log_levels[log_level])"
"0","  logger::log_appender(logger::appender_tee(log_file))"
"0","  "
"0","  # 開始メッセージ"
"0","  logger::log_info(""========================================"")"
"0","  logger::log_info(""HCC Prediction Model Analysis Started"")"
"0","  logger::log_info(""Time: {Sys.time()}"")"
"0","  logger::log_info(""R Version: {R.version.string}"")"
"0","  logger::log_info(""Platform: {Sys.info()['sysname']} {Sys.info()['release']}"")"
"0","  logger::log_info(""========================================"")"
"0","  "
"0","  invisible(NULL)"
"0","}"
